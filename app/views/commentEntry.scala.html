@import play.api.i18n.{Messages => msg}

@(
  articleId: ArticleId, commentForm: Form[Comment]
)(
  implicit messagesApi: msg,
  request: RequestHeader,
  flash: Flash,
  loginBlogger: Option[LoginBlogger]
)

@import helper._

@form(action = CSRF(routes.HomeController.postComment(articleId.value)), 'class -> "commentForm") {
  <input type="hidden" name="articleId" value="@articleId.value">
  @inputText(commentForm("namae"), 'size -> 64, '_showConstraints -> false, '_label -> null, 'placeholder -> msg("courtegyName"))
  @textarea(commentForm("comment"), 'rows -> 5, 'cols -> 80, '_showConstraints -> false, '_label -> null, 'placeholder -> msg("comment"))
  <div class="g-recaptcha" data-callback="onCommentRecaptcha" data-sitekey="6LdtpxcUAAAAAN616Y1aEbxgHBPTA1wpB8ztdkBn"></div>
  <button class="postCommentButton" type="button" onclick="postComment(articleId.value, this.form, '@msg("yes")', '@msg("no")', '@msg("confirmPostComment")', '@routes.HomeController.showArticle(articleId.value).url');" disabled>@msg("postComment")</button>
}

<script>
var onCommentRecaptcha = function(recaptcha) {
  if (recaptcha !== "") {
    $(".postCommentButton").removeAttr("disabled");
  }
};
</script>
